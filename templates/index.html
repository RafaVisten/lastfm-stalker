<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Last.fm Stalker</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='assets/favicon.gif') }}">
</head>
<body>

    <!-- Reload button and User List button -->
    <div class="button-container">
        <button class="top-button" onclick="window.location.reload();">
            <i class="fas fa-sync-alt"></i>
        </button>
        <button class="top-button" onclick="openUserListModal()">
            <i class="fa-solid fa-user"></i>
        </button>
    </div>

    <!-- Modal for User List input -->
    <div id="userListModal" class="modal">
        <div class="modal-content">
            <h2>Edit User List</h2>
            <textarea id="userListInput">{% for user in user_list %}{{ user }}{% if not loop.last %}, {% endif %}{% endfor %}</textarea>
            <button id="submit-btn" onclick="submitUserList()">Submit</button>
        </div>
    </div>

    <h1>Now Playing</h1>

    <div class="grid">
        {% for item in now_playing %}
        <div class="card">
            <p><strong>{{ item.username }}</strong></p>
            <img src="{{ item.image if item.image else url_for('static', filename='assets/unknown.webp') }}" alt="Album Cover">
            <p><a href="{{ item.url }}" target="_blank">{{ item.track }}</a> by {{ item.artist }}</p>
        </div>
        {% endfor %}
    </div>

    <h1>Last Played</h1>
    <div class="grid">
        {% for item in last_played %}
        <div class="card">
            <p><strong>{{ item.username }}</strong></p>
            <img src="{{ item.image if item.image else url_for('static', filename='assets/unknown.webp') }}" alt="Album Cover">
            <p><a href="{{ item.url }}" target="_blank">{{ item.track }}</a> by {{ item.artist }}</p>
        </div>
        {% endfor %}
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>

</body>
</html>